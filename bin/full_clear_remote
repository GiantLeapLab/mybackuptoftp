#!/bin/bash
# Create individual SQL files for each database. These files
# are imported automatically during an initial provision if
# the databases exist per the import-sql.sh process.

echo "--- Start $0"

set -o nounset
set -e 

EMPTY=""
PERIOD=${1:-daily}
NOW=${2:-${EMPTY}}

### FTP server Setup ###
FTPD='/GREY_1TB/ToolkitVault-server-backups'
FTPS='office.giantleaplab.com'
FTPU='tv-backuper'
FTPP='xn->52s4_dAHND#4'
FTP_OPT='-c -E'
FTP="$(which lftp)"

#Start FTP backup using ncftp
echo $FTP -u $FTPU,$FTPP $FTPS
echo rm -rf $FTPD/$PERIOD/$NOW

$FTP -u $FTPU,$FTPP $FTPS<<EOF
rm -rf $FTPD/$PERIOD/$NOW
quit
EOF
